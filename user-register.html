<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Account - Global News Network</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px 0;
        }
        
        .register-container {
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 500px;
            text-align: center;
        }
        
        .register-header {
            margin-bottom: 30px;
        }
        
        .register-header i {
            font-size: 3rem;
            color: #27ae60;
            margin-bottom: 15px;
        }
        
        .register-header h1 {
            color: #333;
            margin-bottom: 10px;
            font-size: 1.8rem;
        }
        
        .register-header p {
            color: #666;
            font-size: 0.9rem;
        }
        
        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }
        
        .form-row {
            display: flex;
            gap: 15px;
        }
        
        .form-row .form-group {
            flex: 1;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #333;
        }
        
        .required {
            color: #e74c3c;
        }
        
        .form-group input, .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }
        
        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #27ae60;
            box-shadow: 0 0 0 3px rgba(39, 174, 96, 0.1);
        }
        
        .form-group input:invalid {
            border-color: #e74c3c;
        }
        
        .form-group input:valid {
            border-color: #27ae60;
        }
        
        .password-strength {
            margin-top: 5px;
            font-size: 0.8rem;
        }
        
        .strength-weak { color: #e74c3c; }
        .strength-medium { color: #f39c12; }
        .strength-strong { color: #27ae60; }
        
        .terms-checkbox {
            display: flex;
            align-items: flex-start;
            margin-bottom: 20px;
            font-size: 0.9rem;
            text-align: left;
        }
        
        .terms-checkbox input[type="checkbox"] {
            width: auto;
            margin-right: 10px;
            margin-top: 2px;
        }
        
        .register-btn {
            width: 100%;
            background: #27ae60;
            color: white;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s ease;
            margin-bottom: 20px;
        }
        
        .register-btn:hover {
            background: #229954;
        }
        
        .register-btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
        }
        
        .alert {
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 20px;
            font-size: 0.9rem;
        }
        
        .alert-error {
            background: #fee;
            color: #c53030;
            border: 1px solid #fed7d7;
        }
        
        .alert-success {
            background: #f0fff4;
            color: #22543d;
            border: 1px solid #c6f6d5;
        }
        
        .links {
            margin-top: 20px;
            font-size: 0.9rem;
        }
        
        .links a {
            color: #27ae60;
            text-decoration: none;
            margin: 0 10px;
            transition: color 0.3s ease;
        }
        
        .links a:hover {
            color: #229954;
            text-decoration: underline;
        }
        
        .loading {
            display: none;
            margin-top: 10px;
        }
        
        .loading i {
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @media (max-width: 600px) {
            .register-container {
                padding: 30px 20px;
                margin: 10px;
            }
            
            .form-row {
                flex-direction: column;
                gap: 0;
            }
            
            .register-header h1 {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="register-container">
        <div class="register-header">
            <i class="fas fa-user-plus"></i>
            <h1>Create Your Account</h1>
            <p>Join Global News Network and stay informed</p>
        </div>

        <div id="alert-container"></div>

        <form id="registerForm">
            <div class="form-row">
                <div class="form-group">
                    <label for="firstName">
                        First Name <span class="required">*</span>
                    </label>
                    <input type="text" id="firstName" name="firstName" placeholder="Enter first name" 
                           required minlength="2" maxlength="30">
                </div>
                
                <div class="form-group">
                    <label for="lastName">
                        Last Name <span class="required">*</span>
                    </label>
                    <input type="text" id="lastName" name="lastName" placeholder="Enter last name" 
                           required minlength="2" maxlength="30">
                </div>
            </div>

            <div class="form-group">
                <label for="username">
                    <i class="fas fa-user"></i> Username <span class="required">*</span>
                </label>
                <input type="text" id="username" name="username" placeholder="Choose a unique username" 
                       required minlength="3" maxlength="20">
            </div>

            <div class="form-group">
                <label for="email">
                    <i class="fas fa-envelope"></i> Email Address <span class="required">*</span>
                </label>
                <input type="email" id="email" name="email" placeholder="Enter your email address" required>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="password">
                        <i class="fas fa-lock"></i> Password <span class="required">*</span>
                    </label>
                    <input type="password" id="password" name="password" placeholder="Create a strong password" 
                           required minlength="6">
                    <div class="password-strength" id="passwordStrength"></div>
                </div>
                
                <div class="form-group">
                    <label for="confirmPassword">
                        <i class="fas fa-lock"></i> Confirm Password <span class="required">*</span>
                    </label>
                    <input type="password" id="confirmPassword" name="confirmPassword" 
                           placeholder="Confirm your password" required minlength="6">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="age">Age Range</label>
                    <select id="age" name="age">
                        <option value="">Select age range</option>
                        <option value="18-25">18-25</option>
                        <option value="26-35">26-35</option>
                        <option value="36-45">36-45</option>
                        <option value="46-55">46-55</option>
                        <option value="56+">56+</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="country">Country</label>
                    <select id="country" name="country">
                        <option value="">Select country</option>
                        <option value="US">United States</option>
                        <option value="CA">Canada</option>
                        <option value="UK">United Kingdom</option>
                        <option value="AU">Australia</option>
                        <option value="DE">Germany</option>
                        <option value="FR">France</option>
                        <option value="IN">India</option>
                        <option value="JP">Japan</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
            </div>

            <div class="terms-checkbox">
                <input type="checkbox" id="agreeTerms" name="agreeTerms" required>
                <label for="agreeTerms">
                    I agree to the <a href="#" onclick="showTerms()">Terms of Service</a> and 
                    <a href="#" onclick="showPrivacy()">Privacy Policy</a> <span class="required">*</span>
                </label>
            </div>

            <div class="terms-checkbox">
                <input type="checkbox" id="newsletter" name="newsletter">
                <label for="newsletter">
                    Subscribe to our newsletter for the latest news updates
                </label>
            </div>

            <button type="submit" class="register-btn" id="registerBtn">
                <i class="fas fa-user-plus"></i> Create Account
            </button>
            
            <div class="loading" id="loading">
                <i class="fas fa-spinner"></i> Creating your account...
            </div>
        </form>

        <div class="links">
            <a href="user-login.php">Already have an account? Sign In</a>
            <a href="index.php">Back to Website</a>
        </div>
    </div>

    <script>
        // Check if user is already logged in
        if (localStorage.getItem('userSession') || sessionStorage.getItem('userSession')) {
            window.location.href = 'index.html';
        }

        // Password strength checker
        document.getElementById('password').addEventListener('input', function() {
            const password = this.value;
            const strengthDiv = document.getElementById('passwordStrength');
            
            if (password.length === 0) {
                strengthDiv.textContent = '';
                return;
            }
            
            let strength = 0;
            let feedback = [];
            
            // Length check
            if (password.length >= 8) strength++;
            else feedback.push('at least 8 characters');
            
            // Uppercase check
            if (/[A-Z]/.test(password)) strength++;
            else feedback.push('uppercase letter');
            
            // Lowercase check
            if (/[a-z]/.test(password)) strength++;
            else feedback.push('lowercase letter');
            
            // Number check
            if (/\d/.test(password)) strength++;
            else feedback.push('number');
            
            // Special character check
            if (/[!@#$%^&*(),.?":{}|<>]/.test(password)) strength++;
            else feedback.push('special character');
            
            if (strength < 2) {
                strengthDiv.className = 'password-strength strength-weak';
                strengthDiv.textContent = 'Weak - Add: ' + feedback.slice(0, 2).join(', ');
            } else if (strength < 4) {
                strengthDiv.className = 'password-strength strength-medium';
                strengthDiv.textContent = 'Medium - Consider adding: ' + feedback.slice(0, 1).join(', ');
            } else {
                strengthDiv.className = 'password-strength strength-strong';
                strengthDiv.textContent = 'Strong password!';
            }
        });

        // Confirm password validation
        document.getElementById('confirmPassword').addEventListener('input', function() {
            const password = document.getElementById('password').value;
            const confirmPassword = this.value;
            
            if (confirmPassword.length > 0) {
                if (password === confirmPassword) {
                    this.style.borderColor = '#27ae60';
                } else {
                    this.style.borderColor = '#e74c3c';
                }
            }
        });

        // Handle form submission
        document.getElementById('registerForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const registerBtn = document.getElementById('registerBtn');
            const loading = document.getElementById('loading');
            
            // Clear previous alerts
            document.getElementById('alert-container').innerHTML = '';
            
            // Get form values
            const firstName = formData.get('firstName').trim();
            const lastName = formData.get('lastName').trim();
            const username = formData.get('username').trim();
            const email = formData.get('email').trim();
            const password = formData.get('password');
            const confirmPassword = formData.get('confirmPassword');
            const agreeTerms = formData.get('agreeTerms');
            
            // Validation
            if (!firstName || !lastName || !username || !email || !password || !confirmPassword) {
                showAlert('Please fill in all required fields', 'error');
                return;
            }
            
            if (password !== confirmPassword) {
                showAlert('Passwords do not match', 'error');
                return;
            }
            
            if (password.length < 6) {
                showAlert('Password must be at least 6 characters long', 'error');
                return;
            }
            
            if (!agreeTerms) {
                showAlert('Please agree to the Terms of Service and Privacy Policy', 'error');
                return;
            }
            
            // Check if username or email already exists
            const registeredUsers = JSON.parse(localStorage.getItem('registeredUsers') || '[]');
            const existingUser = registeredUsers.find(u => u.username === username || u.email === email);
            
            if (existingUser) {
                showAlert('Username or email already exists. Please choose different ones.', 'error');
                return;
            }
            
            // Show loading
            registerBtn.disabled = true;
            loading.style.display = 'block';
            
            // Simulate server delay
            setTimeout(() => {
                // Create new user
                const newUser = {
                    id: Date.now(),
                    firstName: firstName,
                    lastName: lastName,
                    fullName: firstName + ' ' + lastName,
                    username: username,
                    email: email,
                    password: password,
                    age: formData.get('age') || '',
                    country: formData.get('country') || '',
                    newsletter: formData.get('newsletter') === 'on',
                    joinDate: new Date().toISOString().split('T')[0],
                    isActive: true
                };
                
                // Save to registered users
                registeredUsers.push(newUser);
                localStorage.setItem('registeredUsers', JSON.stringify(registeredUsers));
                
                showAlert('Account created successfully! You can now sign in with your credentials.', 'success');
                
                // Reset form
                document.getElementById('registerForm').reset();
                document.getElementById('passwordStrength').textContent = '';
                
                // Redirect to login after 3 seconds
                setTimeout(() => {
                    window.location.href = 'user-login.php';
                }, 3000);
                
            }, 1500);
        });
        
        // Show alert function
        function showAlert(message, type) {
            const alertContainer = document.getElementById('alert-container');
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type}`;
            
            const icon = type === 'error' ? 'fas fa-exclamation-circle' : 'fas fa-check-circle';
            alertDiv.innerHTML = `<i class="${icon}"></i> ${message}`;
            
            alertContainer.appendChild(alertDiv);
            
            // Auto-remove after 8 seconds for error messages
            if (type === 'error') {
                setTimeout(() => {
                    if (alertDiv.parentNode) {
                        alertDiv.parentNode.removeChild(alertDiv);
                    }
                }, 8000);
            }
        }
        
        // Show terms of service
        function showTerms() {
            alert('Terms of Service\n\n1. You must be 18 or older to use this service\n2. Do not post spam or inappropriate content\n3. Respect other users and their opinions\n4. We reserve the right to suspend accounts for violations\n5. Content you post may be moderated\n\n(This is a demo - full terms would be on a separate page)');
        }
        
        // Show privacy policy
        function showPrivacy() {
            alert('Privacy Policy\n\n1. We collect basic account information for registration\n2. We do not sell your personal data to third parties\n3. We use cookies for authentication and user experience\n4. You can delete your account and data at any time\n5. We may send newsletters if you opt-in\n\n(This is a demo - full privacy policy would be on a separate page)');
        }
        
        // Auto-focus on first name field
        document.getElementById('firstName').focus();
        
        console.log('User registration page loaded');
    </script>
</body>
</html>
